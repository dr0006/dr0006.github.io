"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85504,45685,53891],{85504:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(85893),a=n(84588),o=n(69325),l=n(93348),i=n(24955),s=n.n(i),c=n(23493),u=n.n(c),d=n(41664),f=n.n(d),m=n(11163),y=n(67294),h=n(46977);let v=[{key:"↑ ↓",action:"选择"},{key:"Enter",action:"跳转"},{key:"Esc",action:"关闭"}];function p(e){let{cRef:t}=e,[n,l]=(0,y.useState)([]),[i,c]=(0,y.useState)(!1),[d,f]=(0,y.useState)(0),[p,b]=(0,y.useState)(null),[k,w]=(0,y.useState)(0),[j,E]=(0,y.useState)(0),[N,A]=(0,y.useState)(0),[L,C]=(0,y.useState)(0),[S,R]=(0,y.useState)(!1),[O,P]=(0,y.useState)(!1),I=(0,y.useRef)(null),_=(0,m.useRouter)();(0,h.y1)("ctrl+k",e=>{e.preventDefault(),c(!0)}),(0,h.y1)("down",e=>{O&&(e.preventDefault(),L<n.length-1&&C(L+1))},{enableOnFormTags:!0}),(0,h.y1)("up",e=>{O&&(e.preventDefault(),L>0&&C(L-1))},{enableOnFormTags:!0}),(0,h.y1)("esc",e=>{O&&(e.preventDefault(),c(!1))},{enableOnFormTags:!0}),(0,h.y1)("enter",e=>{O&&n.length>0&&D(T)},{enableOnFormTags:!0});let D=()=>{n.length>0&&(window.location.href="".concat((0,o.JA)("SUB_PATH",""),"/").concat(n[L].slug))},K=()=>{C(0),b(""),l([]),A(0),w(0),E(0),I.current&&(I.current.value="")};(0,y.useEffect)(()=>{c(!1)},[_]),(0,y.useEffect)(()=>{i?setTimeout(()=>{var e;null===(e=I.current)||void 0===e||e.focus()},100):K()},[i]),(0,y.useImperativeHandle)(t,()=>({openSearch:()=>{c(!0)}}));let T=s()((0,o.JA)("ALGOLIA_APP_ID"),(0,o.JA)("ALGOLIA_SEARCH_ONLY_APP_KEY")).initIndex((0,o.JA)("ALGOLIA_INDEX")),F=async(e,t)=>{if(b(e),f(t),l([]),A(0),w(0),E(0),C(0),e&&""!==e){R(!0);try{let{hits:n,nbHits:r,nbPages:o,processingTimeMS:i}=await T.search(e,{page:t,hitsPerPage:10});A(i),w(o),E(r),l(n),R(!1);let s=document.getElementById("search-wrapper").getElementsByClassName("replace");setTimeout(()=>{(0,a.Z)({doms:s,search:e,target:{element:"span",className:"font-bold border-b border-dashed"}})},200)}catch(e){console.error("Algolia search error:",e)}}},H=(0,y.useRef)(u()(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;F(e,t)},1e3)),M=(0,y.useRef)(null),J=e=>{let t=e.target.value;M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{H.current(t)},800)},B=()=>{c(!1)};return(0,o.JA)("ALGOLIA_APP_ID")?(0,r.jsxs)("div",{id:"search-wrapper",className:"".concat(i?"opacity-100":"invisible opacity-0 pointer-events-none"," z-30 fixed h-screen w-screen left-0 top-0 sm:mt-12 flex items-start justify-center mt-0"),children:[(0,r.jsxs)("div",{className:"".concat(i?"opacity-100":"invisible opacity-0 translate-y-10"," flex flex-col justify-between w-full min-h-[10rem] h-full md:h-fit max-w-xl dark:bg-hexo-black-gray dark:border-gray-800 bg-white dark:bg- p-5 rounded-lg z-50 shadow border hover:border-blue-600 duration-300 transition-all "),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-2xl text-blue-600 dark:text-yellow-600 font-bold",children:"搜索"}),(0,r.jsx)("div",{children:(0,r.jsx)("i",{className:"text-gray-600 fa-solid fa-xmark p-1 cursor-pointer hover:text-blue-600",onClick:B})})]}),(0,r.jsx)("input",{type:"text",placeholder:"在这里输入搜索关键词...",onChange:e=>J(e),onFocus:()=>P(!0),onBlur:()=>P(!1),className:"text-black dark:text-gray-200 bg-gray-50 dark:bg-gray-600 outline-blue-500 w-full px-4 my-2 py-1 mb-4 border rounded-md",ref:I}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(x,{})}),0===n.length&&p&&!S&&(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:" text-slate-600 text-center my-4 text-base",children:[" ","无法找到相关结果",(0,r.jsxs)("span",{className:"font-semibold",children:['"',p,'"']})]})}),(0,r.jsx)("ul",{className:"flex-1 overflow-auto",children:n.map((e,t)=>(0,r.jsx)("li",{onMouseEnter:()=>C(t),onClick:()=>D(t),className:"cursor-pointer replace my-2 p-2 duration-100 \n              rounded-lg\n              ".concat(L===t?"bg-blue-600 dark:bg-yellow-600":""),children:(0,r.jsx)("a",{className:"".concat(L===t?" text-white":" text-black dark:text-gray-300 "),children:e.title})},e.objectID))}),(0,r.jsx)(g,{totalPage:k,page:d,switchPage:e=>{H.current(p,e)}}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2 sm:text-sm text-xs dark:text-gray-300",children:[0===j&&(0,r.jsx)("div",{className:"flex items-center",children:v.map((e,t)=>(0,r.jsxs)(y.Fragment,{children:[(0,r.jsx)("div",{className:"border-gray-300 dark:text-gray-300 text-gray-600 px-2 rounded border inline-block",children:e.key}),(0,r.jsx)("span",{className:"ml-2 mr-4  text-gray-600 dark:text-gray-300",children:e.action})]},t))}),(0,r.jsx)("div",{children:j>0&&(0,r.jsxs)("p",{children:["共搜索到 ",j," 条结果，用时 ",N," 毫秒"]})}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-300  text-right",children:(0,r.jsxs)("span",{children:[(0,r.jsx)("i",{className:"fa-brands fa-algolia"})," Algolia 提供搜索服务"]})})]})]}),(0,r.jsx)("div",{onClick:B,className:"z-30 fixed top-0 left-0 w-full h-full flex items-center justify-center glassmorphism"})]}):(0,r.jsx)(r.Fragment,{})}function x(){let{tagOptions:e}=(0,l.O)(),t=null==e?void 0:e.slice(0,10);return(0,r.jsx)("div",{id:"tags-group",className:"dark:border-gray-700 space-y-2",children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(f(),{passHref:!0,href:"/tag/".concat(encodeURIComponent(e.name)),className:"cursor-pointer inline-block whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center text-black dark:text-gray-300 hover:bg-blue-600 dark:hover:bg-yellow-600 hover:scale-110 hover:text-white rounded-lg px-2 py-0.5 duration-150 transition-all",children:[(0,r.jsxs)("div",{className:"text-lg",children:[e.name," "]}),e.count?(0,r.jsx)("sup",{className:"relative ml-1",children:e.count}):(0,r.jsx)(r.Fragment,{})]})},t))})}function g(e){let{totalPage:t,page:n,switchPage:a}=e;return t<=0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"flex space-x-1 w-full justify-center py-1",children:Array.from({length:t},(e,t)=>{let o=n===t?"font-bold text-white bg-blue-600 dark:bg-yellow-600 rounded":"hover:text-blue-600 hover:font-bold dark:text-gray-300";return(0,r.jsx)("div",{onClick:()=>a(t),className:"text-center cursor-pointer w-6 h-6 ".concat(o),children:t+1},t)})})}},84588:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(78174);async function a(e){let{doms:t,search:n,target:a}=e;if(t&&n&&a)try{await (0,r.loadExternalResource)("https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js","js");let e=window.Mark;if(t instanceof HTMLCollection)for(let r of t){let t=RegExp(n,"gim");new e(r).markRegExp(t,a)}else{let r=RegExp(n,"gim");new e(t).markRegExp(r,a)}}catch(e){console.error("markjs 加载失败",e)}}},46977:function(e,t,n){n.d(t,{y1:function(){return b}});var r=n(67294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}n(85893);var o=["shift","alt","meta","mod","ctrl"],l={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function i(e){return(e&&l[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function s(e,t){return void 0===t&&(t=","),e.split(t)}function c(e,t,n){void 0===t&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(e){return i(e)}),l={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},s=r.filter(function(e){return!o.includes(e)});return a({},l,{keys:s,description:n,hotkey:e})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&f([i(e.key),i(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&m([i(e.key),i(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){u.clear()});var u=new Set;function d(e){return Array.isArray(e)}function f(e){var t=Array.isArray(e)?e:[e];u.has("meta")&&u.forEach(function(e){return!o.includes(e)&&u.delete(e.toLowerCase())}),t.forEach(function(e){return u.add(e.toLowerCase())})}function m(e){var t=Array.isArray(e)?e:[e];"meta"===e?u.clear():t.forEach(function(e){return u.delete(e.toLowerCase())})}function y(e,t){void 0===t&&(t=!1);var n=e.target,r=e.composed,a=null;return(a=n.tagName&&!n.tagName.startsWith("-")&&n.tagName.includes("-")&&r?e.composedPath()[0]&&e.composedPath()[0].tagName:n&&n.tagName,d(t))?!!(a&&t&&t.some(function(e){var t;return e.toLowerCase()===(null==(t=a)?void 0:t.toLowerCase())})):!!(a&&t&&t)}var h=function(e,t,n){void 0===n&&(n=!1);var r,a=t.alt,o=t.meta,l=t.mod,s=t.shift,c=t.ctrl,f=t.keys,m=e.key,y=e.code,h=e.ctrlKey,v=e.metaKey,p=e.shiftKey,x=e.altKey,g=i(y),b=m.toLowerCase();if(!(null!=f&&f.includes(g))&&!(null!=f&&f.includes(b))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!n){if(!x===a&&"alt"!==b||!p===s&&"shift"!==b)return!1;if(l){if(!v&&!h)return!1}else if(!v===o&&"meta"!==b&&"os"!==b||!h===c&&"ctrl"!==b&&"control"!==b)return!1}return!!(f&&1===f.length&&(f.includes(b)||f.includes(g)))||(f?(void 0===r&&(r=","),(d(f)?f:f.split(r)).every(function(e){return u.has(e.trim().toLowerCase())})):!f)},v=(0,r.createContext)(void 0),p=(0,r.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),x=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},g="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function b(e,t,n,a){var o,l=(0,r.useState)(null),u=l[0],b=l[1],k=(0,r.useRef)(!1),w=n instanceof Array?a instanceof Array?void 0:a:n,j=d(e)?e.join(null==w?void 0:w.splitKey):e,E=n instanceof Array?n:a instanceof Array?a:void 0,N=(0,r.useCallback)(t,null!=E?E:[]),A=(0,r.useRef)(N);E?A.current=N:A.current=t;var L=(!function e(t,n){return t&&n&&"object"==typeof t&&"object"==typeof n?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(r,a){return r&&e(t[a],n[a])},!0):t===n}((o=(0,r.useRef)(void 0)).current,w)&&(o.current=w),o.current),C=(0,r.useContext)(p).enabledScopes,S=(0,r.useContext)(v);return g(function(){if((null==L?void 0:L.enabled)!==!1&&(e=null==L?void 0:L.scopes,0===C.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!e||C.some(function(t){return e.includes(t)})||C.includes("*")))){var e,t=function(e,t){var n;if(void 0===t&&(t=!1),!y(e,["input","textarea","select"])||y(e,null==L?void 0:L.enableOnFormTags)){if(null!==u){var r=u.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==u&&!u.contains(r.activeElement)){x(e);return}}(null==(n=e.target)||!n.isContentEditable||null!=L&&L.enableOnContentEditable)&&s(j,null==L?void 0:L.splitKey).forEach(function(n){var r,a,o,l=c(n,null==L?void 0:L.combinationKey);if(h(e,l,null==L?void 0:L.ignoreModifiers)||null!=(o=l.keys)&&o.includes("*")){if(null!=L&&null!=L.ignoreEventWhen&&L.ignoreEventWhen(e)||t&&k.current)return;if(("function"==typeof(r=null==L?void 0:L.preventDefault)&&r(e,l)||!0===r)&&e.preventDefault(),"function"==typeof(a=null==L?void 0:L.enabled)?!a(e,l):!0!==a&&void 0!==a){x(e);return}A.current(e,l),t||(k.current=!0)}})}},n=function(e){void 0!==e.key&&(f(i(e.code)),((null==L?void 0:L.keydown)===void 0&&(null==L?void 0:L.keyup)!==!0||null!=L&&L.keydown)&&t(e))},r=function(e){void 0!==e.key&&(m(i(e.code)),k.current=!1,null!=L&&L.keyup&&t(e,!0))},a=u||(null==w?void 0:w.document)||document;return a.addEventListener("keyup",r),a.addEventListener("keydown",n),S&&s(j,null==L?void 0:L.splitKey).forEach(function(e){return S.addHotkey(c(e,null==L?void 0:L.combinationKey,null==L?void 0:L.description))}),function(){a.removeEventListener("keyup",r),a.removeEventListener("keydown",n),S&&s(j,null==L?void 0:L.splitKey).forEach(function(e){return S.removeHotkey(c(e,null==L?void 0:L.combinationKey,null==L?void 0:L.description))})}}},[u,j,L,C]),b}}}]);